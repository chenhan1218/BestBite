# ğŸ—ï¸ BestBite è¨­è¨ˆæ±ºç­–æ–‡æª”

**ç›®çš„ï¼š** è¨˜éŒ„æ‰€æœ‰é‡è¦çš„æ¶æ§‹å’ŒæŠ€è¡“æ±ºç­–åŠå…¶ç†ç”±ï¼Œä¾¿æ–¼æœªä¾†ç¶­è­·è€…ç†è§£è¨­è¨ˆæ„åœ–

**Last Updated:** 2025-12-17
**Audience:** æ¶æ§‹å¸«ã€è³‡æ·±é–‹ç™¼è€…ã€æ–°åŠ å…¥çš„åœ˜éšŠæˆå“¡

---

## ğŸ“‹ æ±ºç­–ç´¢å¼•

| é¡åˆ¥ | æ±ºç­– | ç‹€æ…‹ |
|------|------|------|
| **èªè­‰** | ç„¡å¸³è™Ÿæ¨¡å¼ï¼ˆAnonymous UUIDï¼‰ | âœ… ç¢ºå®š |
| **è³‡æ–™å­˜å„²** | Firebase Firestore ä½œç‚ºæ•¸æ“šæº | âœ… ç¢ºå®š |
| **æœ¬åœ°ç·©å­˜** | IndexedDB é›¢ç·šå„ªå…ˆå±¤ | âœ… ç¢ºå®š |
| **åœ–ç‰‡å­˜å„²** | Firebase Storage | âœ… ç¢ºå®š |
| **ç‹€æ…‹ç®¡ç†** | React Context APIï¼ˆæš«æœªå¯¦ç¾ï¼‰ | âœ… ç¢ºå®š |
| **AI é›†æˆ** | Google Gemini Vision API | âœ… ç¢ºå®š |
| **API è·¯ç”±** | Next.js Route Handler | âœ… ç¢ºå®š |
| **éƒ¨ç½²å¹³å°** | Vercel | âœ… ç¢ºå®š |
| **UI æ¡†æ¶** | Next.js 15 + React 19 | âœ… ç¢ºå®š |
| **æ¸¬è©¦ç­–ç•¥** | Mock API + å–®å…ƒæ¸¬è©¦å•†æ¥­é‚è¼¯ | âœ… ç¢ºå®š |

---

## ğŸ¯ æ ¸å¿ƒè¨­è¨ˆæ±ºç­–

### 1ï¸âƒ£ èªè­‰ï¼šç„¡å¸³è™Ÿæ¨¡å¼ï¼ˆAnonymous UUIDï¼‰

**æ±ºç­–ï¼š** ä¸ä½¿ç”¨å‚³çµ±å¸³è™Ÿç™»å…¥ï¼Œæ”¹ç”¨åŒ¿å UUID è­˜åˆ¥ç”¨æˆ¶

**ç†ç”±ï¼š**
- **MVP å„ªå…ˆ** - æ¸›å°‘é–‹ç™¼è¤‡é›œåº¦ï¼ŒåŠ å¿«ä¸Šå¸‚æ™‚é–“
- **éš±ç§å„ªå…ˆ** - ç„¡éœ€å€‹äººä¿¡æ¯ï¼Œå®Œå…¨åŒ¿åä½¿ç”¨
- **ä½æ‘©æ“¦** - ç”¨æˆ¶é›¶é…ç½®ï¼Œå³é–‹å³ç”¨
- **åŸºç¤ç‰¢é ** - UUID å’Œ Firebase Admin å·²æ”¯æ´å‡ç´šåˆ°å¸³è™Ÿæ¨¡å¼

**å¯¦ç¾ç´°ç¯€ï¼š**
```typescript
// src/lib/firebase.ts
export const getOrCreateUserID = (): string => {
  // 1. æª¢æŸ¥ localStorage ä¸­æ˜¯å¦å·²æœ‰ UUID
  // 2. æ²’æœ‰å‰‡ç”Ÿæˆæ–° UUID (crypto.getRandomValues)
  // 3. å­˜å„²åˆ° localStorageï¼Œä¿æŒè·¨æœƒè©±ä¸€è‡´æ€§
}
```

**å‡ç´šè·¯å¾‘ï¼ˆæœªä¾†ï¼‰ï¼š**
```
Phase 1: Anonymous UUID (current)
         â†“
Phase 2: Optional Firebase Auth (å¸³è™Ÿç¶å®š UUID æ•¸æ“š)
         â†“
Phase 3: å¸³è™ŸåŒæ­¥ï¼ˆè·¨è¨­å‚™ï¼‰
```

**å–æ¨ï¼š**
- âŒ ç„¡æ³•è·¨è¨­å‚™åŒæ­¥ï¼ˆä½†æœ¬åœ°å­˜å„²å®Œå…¨å¯ç”¨ï¼‰
- âŒ ç„¡æ³•æ¢å¾©æ•¸æ“šï¼ˆUUID éºå¤±å³æ•¸æ“šéºå¤±ï¼‰
- âœ… å¿«é€Ÿä¸Šå¸‚ï¼Œé›¶ç”¨æˆ¶æ‘©æ“¦

---

### 2ï¸âƒ£ è³‡æ–™å­˜å„²ï¼šFirestore ä½œç‚ºæ•¸æ“šæº

**æ±ºç­–ï¼š** ä½¿ç”¨ Firebase Firestore ä½œç‚ºä¸»è¦è³‡æ–™åº«

**ç†ç”±ï¼š**
- **å¯¦æ™‚åŒæ­¥** - ç„¡éœ€è¼ªè©¢ï¼Œè‡ªå‹•æ¨é€æ›´æ–°
- **ç„¡ä¼ºæœå™¨** - ç„¡éœ€ç¶­è­·å¾Œç«¯ï¼Œè‡ªå‹•æ“´å±•
- **é›¢ç·šæ”¯æ´** - Firestore SDK å…§å»ºé›¢ç·šåŒæ­¥
- **é è¨­çµæ§‹** - è‡ªå‹•ç´¢å¼•ï¼ŒæŸ¥è©¢å¿«é€Ÿ
- **Firebase ç”Ÿæ…‹** - èˆ‡ Storageã€Authã€Functions ç„¡ç¸«æ•´åˆ

**çµæ§‹è¨­è¨ˆï¼š**
```
Firestore Database:
â”œâ”€â”€ users/{userId}/
â”‚   â”œâ”€â”€ profile (æœªä¾†: å¸³è™Ÿä¿¡æ¯)
â”‚   â””â”€â”€ food_items/{itemId}
â”‚       â”œâ”€â”€ product_name: string
â”‚       â”œâ”€â”€ expiry_date: string (YYYY-MM-DD)
â”‚       â”œâ”€â”€ status: enum (red|yellow|green)
â”‚       â”œâ”€â”€ image_url: string
â”‚       â”œâ”€â”€ confidence: number (0-100)
â”‚       â”œâ”€â”€ created_at: timestamp
â”‚       â””â”€â”€ updated_at: timestamp
```

**é—œéµæ±ºç­–ï¼š**
- âœ… **ç”¨æˆ¶éš”é›¢** - æ¯å€‹ userId ç¨ç«‹ç·©å­˜ï¼Œéš±ç§å®‰å…¨
- âœ… **å¾·è¦ç¯„åŒ–** - `status` å’Œ `days_until_expiry` å†—ä½™å­˜å„²ï¼ˆå„ªåŒ–æŸ¥è©¢ï¼‰
- âœ… **æ™‚é–“æˆ³è‡ªå‹•** - ä½¿ç”¨ `serverTimestamp()`ï¼Œé¿å…å®¢æˆ¶ç«¯æ™‚é˜åå·®

**é™åˆ¶å’Œå–æ¨ï¼š**
- âš ï¸ **é…é¡é™åˆ¶** - å…è²»å±¤ 50K è®€ã€20K å¯«/å¤©
- âš ï¸ **ç„¡è¤‡é›œæŸ¥è©¢** - ä¸æ”¯æ´è·¨é›†åˆ JOIN ï¼ˆä½†å–®é›†åˆæŸ¥è©¢å¤ ç”¨ï¼‰
- âœ… **æˆæœ¬å¯æ§** - å°è¦æ¨¡æ‡‰ç”¨å…è²»ï¼Œå¤§è¦æ¨¡æ‡‰ç”¨æŒ‰é‡è¨ˆè²»

---

### 3ï¸âƒ£ æœ¬åœ°ç·©å­˜ï¼šIndexedDB é›¢ç·šå„ªå…ˆå±¤

**æ±ºç­–ï¼š** ä½¿ç”¨ IndexedDB ä½œç‚ºå®¢æˆ¶ç«¯ç·©å­˜ï¼Œæ”¯æ´å®Œå…¨é›¢ç·šå·¥ä½œ

**ç†ç”±ï¼š**
- **å®Œå…¨é›¢ç·š** - ç„¡ç¶²è·¯ä¹Ÿèƒ½è®€å–å’Œç·¨è¼¯æœ¬åœ°æ•¸æ“š
- **å¿«é€ŸæŸ¥è©¢** - ç´¢å¼•æŸ¥è©¢æ¯«ç§’ç´šï¼ˆvs Firestore ç¶²è·¯å»¶é²ï¼‰
- **è‡ªå‹•åŒæ­¥** - Firestore SDK å¯ç›£è½æœ¬åœ°è®Šæ›´
- **ç„¡é™å®¹é‡** - ä¸€èˆ¬ 50MB-1GBï¼ˆé è¶…æœ¬æ‡‰ç”¨éœ€æ±‚ï¼‰

**å¯¦ç¾ç´°ç¯€ï¼ˆsrc/lib/storage.tsï¼‰ï¼š**
```typescript
// IndexedDB Schema
Database: "BestBiteDB" (version: 1)
â”œâ”€â”€ Store: food_items
â”‚   â”œâ”€â”€ keyPath: 'id'
â”‚   â”œâ”€â”€ index: expiry_date (å¿«é€Ÿæ’åº)
â”‚   â”œâ”€â”€ index: status (å¿«é€Ÿç¯©é¸)
â”‚   â””â”€â”€ index: created_at (æ™‚é–“åºåˆ—)
â””â”€â”€ Store: metadata
    â””â”€â”€ lastSync: timestamp (åŒæ­¥è¿½è¹¤)

// åŒæ­¥ç­–ç•¥ï¼š
1. å¯«å…¥ IndexedDB ï¼ˆç«‹å³æ›´æ–° UIï¼‰
2. å¾Œå°å¯«å…¥ Firestore ï¼ˆé›²å‚™ä»½ï¼‰
3. Firestore ç›£è½è®Šæ›´ â†’ åŒæ­¥åˆ° IndexedDB
```

**å„ªé»ï¼š**
- âœ… **æ¨‚è§€æ›´æ–°** - ç«‹å³åæ˜  UIï¼Œç„¡å»¶é²æ„Ÿ
- âœ… **è¡çªè§£æ±º** - ç°¡å–®ç­–ç•¥ï¼šFirestore å„ªå…ˆï¼ˆé›²æ•¸æ“šæ›´æ–°ï¼‰
- âœ… **éš±ç§** - æ•¸æ“šå®Œå…¨æœ¬åœ°ï¼Œç„¡é›²è¿½è¹¤

**é™åˆ¶ï¼š**
- âš ï¸ **è¨­å‚™ç¶å®š** - æ•¸æ“šåªåœ¨æœ¬è¨­å‚™ï¼ˆç„¡è·¨è¨­å‚™åŒæ­¥ï¼‰
- âš ï¸ **ç€è¦½å™¨æ¸…é™¤** - ç”¨æˆ¶æ¸…é™¤ IndexedDB å‰‡ä¸Ÿå¤±æœ¬åœ°æ•¸æ“š
- âœ… **å¯æ¥å—** - MVP éšæ®µå¤ ç”¨ï¼ŒPhase 2 å¯åŠ å¸³è™ŸåŒæ­¥

---

### 4ï¸âƒ£ åœ–ç‰‡å­˜å„²ï¼šFirebase Storage

**æ±ºç­–ï¼š** åœ–ç‰‡å­˜å„²åœ¨ Firebase Storageï¼Œé Firestore

**ç†ç”±ï¼š**
- **Firestore é™åˆ¶** - æ¯æ–‡æª” 1MBï¼Œåœ–ç‰‡æœƒè¶…é™
- **åˆ†é›¢é—œåˆ‡** - æ–‡ä»¶å„²å­˜ï¼ˆStorageï¼‰vs çµæ§‹æ•¸æ“šï¼ˆFirestoreï¼‰
- **CDN å„ªåŒ–** - Google Cloud CDN è‡ªå‹•åŠ é€Ÿ
- **æˆæœ¬å„ªåŒ–** - å­˜å„²ä¾¿å®œï¼Œé »ç¹è®€å–å…è²»ï¼ˆ5GB/æœˆå…è²»å±¤ï¼‰

**çµæ§‹è¨­è¨ˆï¼š**
```
Firebase Storage:
â””â”€â”€ users/{userId}/
    â””â”€â”€ images/
        â”œâ”€â”€ {itemId}.jpg (åŸå§‹åœ–ç‰‡)
        â””â”€â”€ {itemId}_thumb.jpg (ç¸®åœ–ï¼Œæœªä¾†)

// Firestore ä¸­åªå­˜å„² URLï¼š
{
  image_url: "gs://bucket/users/userId/images/itemId.jpg"
}
```

**å·¥ä½œæµï¼š**
1. ç”¨æˆ¶é¸æ“‡/æ‹æ”åœ–ç‰‡
2. å‰ç«¯å£“ç¸®è‡³ <2MB
3. ä¸Šå‚³åˆ° Storage â†’ ç²å¾— URL
4. ä¿å­˜ URL åˆ° Firestore
5. åœ–ç‰‡åˆªé™¤æ™‚ï¼ŒåŒæ­¥åˆªé™¤ Storage æ–‡ä»¶

**å–æ¨ï¼š**
- âœ… **è‡ªå‹•å‚™ä»½** - åœ–ç‰‡å’Œå…ƒæ•¸æ“šéƒ½åœ¨é›²ç«¯
- âŒ **ç•¥è¤‡é›œ** - éœ€è¦åŒæ™‚ç®¡ç† Firestore + Storage æ“ä½œ

---

### 5ï¸âƒ£ ç‹€æ…‹ç®¡ç†ï¼šReact Context API

**æ±ºç­–ï¼š** ä½¿ç”¨ React Context API ç®¡ç†å…¨å±€é£Ÿå“æ¸…å–®ç‹€æ…‹

**ç†ç”±ï¼š**
- **ç„¡éœ€é¡å¤–åº«** - React å…§å»ºï¼Œç„¡ä¾è³´
- **å¤ ç”¨çš„åŠŸèƒ½** - å–®ç”¨æˆ¶ã€å–®è¨­å‚™ï¼Œç„¡è¤‡é›œè·¨é é¢ç‹€æ…‹
- **æ˜“æ–¼æ¸¬è©¦** - Pure functionï¼Œå¯ mock
- **æ˜“æ–¼é·ç§»** - æœªä¾†å¯æ”¹ Redux/Zustand

**æ¶æ§‹ï¼ˆè¨ˆåŠƒï¼Œæœªå¯¦ç¾ï¼‰ï¼š**
```typescript
// src/context/FoodContext.tsx
interface FoodContextValue {
  foodItems: FoodItem[]
  loading: boolean
  error: string | null
  // æ´¾ç”Ÿç‹€æ…‹
  redItems: FoodItem[]
  yellowItems: FoodItem[]
  greenItems: FoodItem[]
  // æ“ä½œ
  addFoodItem(input: FoodItemInput): Promise<void>
  updateFoodItem(id: string, updates: Partial<FoodItem>): Promise<void>
  deleteFoodItem(id: string): Promise<void>
}
```

**è³‡æ–™æµï¼š**
```
Components
    â†“
useFoodItems() Hook (CRUD æ“ä½œ)
    â†“
FoodContext (å…¨å±€ç‹€æ…‹)
    â†“
    â”œâ”€â†’ IndexedDB (æœ¬åœ°è®€å¯«)
    â”‚   â†“
    â”‚   Firestore (å¾Œå°åŒæ­¥)
    â”‚
    â””â”€â†’ UI re-render
```

**å‡ç´šè·¯å¾‘ï¼š**
- Phase 1: Context API (current)
- Phase 2: å¯æ”¹ç‚º Zustandï¼ˆæ›´è¼•é‡ï¼‰æˆ– Reduxï¼ˆæ›´è¤‡é›œï¼‰

---

### 6ï¸âƒ£ AI é›†æˆï¼šGoogle Gemini Vision API

**æ±ºç­–ï¼š** ä½¿ç”¨ Google Gemini Vision API é€²è¡Œé£Ÿå“è­˜åˆ¥

**ç†ç”±ï¼š**
- **è¦–è¦ºèƒ½åŠ›å¼·** - Gemini 1.5 vision è­˜åˆ¥ç²¾åº¦é«˜
- **ä¸­æ–‡æ”¯æ´** - åŸç”Ÿæ”¯æ´ä¸­æ–‡æç¤ºè©å’Œè¼¸å‡º
- **æˆæœ¬ç¶“æ¿Ÿ** - æ¯” Claude Visionã€GPT-4V ä¾¿å®œ
- **API ç°¡æ½”** - SDK æ˜“ç”¨ï¼Œé›†æˆå¿«é€Ÿ

**å¯¦ç¾ä½ç½®ï¼ˆsrc/lib/gemini.tsï¼‰ï¼š**
```typescript
// æœå‹™å™¨ç«¯ API Route èª¿ç”¨ï¼ˆéš±è— API Keyï¼‰
POST /api/gemini
{
  image: "base64-encoded-string",
  mimeType: "image/jpeg"
}

Response:
{
  product_name: "ç¾©ç¾å°æ³¡èŠ™",
  expiry_date: "2025-12-25",
  confidence: 95,
  notes?: "é¡å¤–ä¿¡æ¯"
}
```

**é—œéµè¨­è¨ˆï¼š**
- âœ… **ä¼ºæœå™¨è·¯ç”±** - API Key ä¸æš´éœ²åˆ°å‰ç«¯
- âœ… **Base64 ç·¨ç¢¼** - ç„¡éœ€ multipartï¼Œç°¡åŒ–å¾Œç«¯
- âœ… **ä¿¡å¿ƒåº¦è©•åˆ†** - 0-100ï¼ŒUI æ ¹æ“šåˆ†æ•¸é¡¯ç¤ºè­¦å‘Š

**æˆæœ¬åˆ†æï¼š**
- Gemini API å…è²»å±¤ï¼šç„¡é™è®€ï¼Œä½†é ˆä»˜è²»è¦–è¦ºè™•ç†
- ä¼°è¨ˆæˆæœ¬ï¼š~10K åœ–ç‰‡/æœˆ = $5-10/æœˆï¼ˆå°è¦æ¨¡ï¼‰

**æ›¿ä»£æ–¹æ¡ˆè©•ä¼°ï¼š**
| æ–¹æ¡ˆ | æˆæœ¬ | ç²¾åº¦ | ä¸­æ–‡ | é¸æ“‡ |
|------|------|------|------|------|
| Gemini | $$ | â­â­â­â­â­ | âœ… | âœ… é¸æ“‡ |
| Claude | $$$$ | â­â­â­â­â­ | âœ… | âŒ è²´ |
| GPT-4V | $$$ | â­â­â­â­â­ | âœ… | âŒ è²´ |
| æœ¬åœ° (YOLO) | å…è²» | â­â­â­ | âŒ | âŒ ç²¾åº¦ä½ |

---

### 7ï¸âƒ£ API è·¯ç”±ï¼šNext.js Route Handler

**æ±ºç­–ï¼š** ä½¿ç”¨ Next.js Route Handlerï¼ˆ`/api/*`ï¼‰ä½œç‚ºå¾Œç«¯ï¼Œä¸å»ºç«‹ç¨ç«‹ä¼ºæœå™¨

**ç†ç”±ï¼š**
- **ç„¡ä¼ºæœå™¨** - ç„¡éœ€ç¶­è­·å¾Œç«¯ï¼ŒVercel è‡ªå‹•éƒ¨ç½²
- **API Key å®‰å…¨** - åœ¨ä¼ºæœå™¨ç«¯èª¿ç”¨ï¼Œä¸æš´éœ²å‰ç«¯
- **é–‹ç™¼å¿«é€Ÿ** - å–®ä¸€å€‰åº«ï¼ŒåŒæ­¥ç™¼å¸ƒ
- **æˆæœ¬ä½** - Vercel å…è²»å±¤åŒ…å« API èª¿ç”¨

**å¯¦ç¾ï¼ˆsrc/app/api/gemini/route.tsï¼‰ï¼š**
```typescript
export async function POST(request: Request) {
  // 1. é©—è­‰è«‹æ±‚æ ¼å¼
  // 2. å¾ä¼ºæœå™¨ç’°å¢ƒè®Šæ•¸è®€ GEMINI_API_KEY
  // 3. èª¿ç”¨ Gemini API
  // 4. é©—è­‰å’Œæ ¼å¼åŒ–å›æ‡‰
  // 5. è¿”å› JSON
}
```

**å®‰å…¨è€ƒé‡ï¼š**
- âœ… API Key å­˜å„²åœ¨ `.env.local`ï¼ˆä¸æäº¤ Gitï¼‰
- âœ… å‰ç«¯ç„¡æ³•å­˜å– Key
- âœ… å¯æ·»åŠ é€Ÿç‡é™åˆ¶ï¼ˆæœªä¾†ï¼‰

**é™åˆ¶ï¼š**
- âš ï¸ ç„¡è¤‡é›œæ¥­å‹™é‚è¼¯ - Route Handler é©åˆç°¡å–®è½‰ç™¼ï¼Œè¤‡é›œé‚è¼¯å»ºè­°é·ç§»åˆ° Serverless Function
- âœ… ç•¶å‰è¶³å¤  - MVP éšæ®µç°¡å–®ç›´è½‰

---

### 8ï¸âƒ£ éƒ¨ç½²ï¼šVercel

**æ±ºç­–ï¼š** éƒ¨ç½²åˆ° Vercelï¼ˆå®˜æ–¹ Next.js è¨—ç®¡ï¼‰

**ç†ç”±ï¼š**
- **Next.js å®˜æ–¹** - å„ªåŒ–æœ€å¥½ï¼Œæ”¯æ´æœ€å®Œæ•´
- **è‡ªå‹•éƒ¨ç½²** - GitHub push â†’ è‡ªå‹•æ§‹å»ºç™¼å¸ƒ
- **å…è²»å±¤** - è¶³å¤  MVPï¼ŒPro è¨ˆç•«ä¾¿å®œ
- **é‚Šç·£è¨ˆç®—** - å‡½æ•¸è‡ªå‹•åˆ†ä½ˆå…¨çƒï¼Œä½å»¶é²
- **ç’°å¢ƒè®Šæ•¸** - Web UI ç®¡ç†æ•æ„Ÿè³‡è¨Š

**éƒ¨ç½²æµç¨‹ï¼š**
```
Git push to main/develop
    â†“
GitHub webhook â†’ Vercel
    â†“
npm install && npm run build
    â†“
è‡ªå‹•é‹è¡Œ ESLint + Type Check
    â†“
å¤±æ•— â†’ é€šçŸ¥ / æˆåŠŸ â†’ éƒ¨ç½²
    â†“
URL: https://bestbite.vercel.app
```

**æ›¿ä»£æ–¹æ¡ˆï¼š**
| æ–¹æ¡ˆ | æˆæœ¬ | æ˜“ç”¨æ€§ | Next.js æ”¯æ´ | é¸æ“‡ |
|------|------|--------|------------|------|
| Vercel | å…è²» | â­â­â­â­â­ | âœ… å®˜æ–¹ | âœ… é¸æ“‡ |
| Netlify | å…è²» | â­â­â­â­ | âœ… å¥½ | âŒ ä¸å¦‚ Vercel |
| Railway | $ | â­â­â­â­ | âœ… å¥½ | âŒ éœ€ä»˜è²» |
| AWS | è¤‡é›œ | â­â­ | âœ… å¯ä»¥ | âŒ éåº¦å·¥ç¨‹ |

---

### 9ï¸âƒ£ æŠ€è¡“æ£§ï¼šNext.js 15 + React 19

**æ±ºç­–ï¼š** ä½¿ç”¨æœ€æ–°çš„ Next.js 15 å’Œ React 19

**ç†ç”±ï¼š**
- **æœ€æ–°åŠŸèƒ½** - React 19 Actionã€Compiler å„ªåŒ–
- **Server Component** - æ¸›å°‘ JS bundleï¼Œæå‡æ€§èƒ½
- **App Router** - æ›´å¥½çš„é¡å‹ç³»çµ±ã€ç°¡åŒ– API è·¯ç”±
- **é–‹ç™¼é«”é©—** - å¿«é€Ÿåˆ·æ–°ã€æ›´å¥½çš„ Error Display

**ç‰ˆæœ¬é–å®šç­–ç•¥ï¼š**
```json
{
  "next": "^15.0.0",    // caret: è‡ªå‹•å°ç‰ˆæœ¬æ›´æ–° (15.0 â†’ 15.5 âœ… 15.6 âŒ)
  "react": "^19.0.0"    // åŒä¸Š
}
```

**é•·æœŸè¨ˆåŠƒï¼š**
- Next.js 15 â†’ 16 å‡ç´šè¨ˆåŠƒå·²å¯«ï¼ˆè¦‹ DESIGN_DECISIONS.mdï¼‰
- ä¿å®ˆç­–ç•¥ï¼šç­‰å¾… 16 ç©©å®šå¾Œï¼ˆç™¼å¸ƒ 1-2 æœˆï¼‰å†å‡ç´š
- ç•¶å‰ä»£ç¢¼å·²ç›¸å®¹ï¼Œç„¡é¡å¤–æ”¹å‹•éœ€

---

### ğŸ”Ÿ æ¸¬è©¦ç­–ç•¥ï¼šMock API + å–®å…ƒæ¸¬è©¦

**æ±ºç­–ï¼š** ä¸é€²è¡Œ E2E æ¸¬è©¦æˆ–å¯¦æ™‚ API æ¸¬è©¦ï¼Œå°ˆæ³¨å–®å…ƒæ¸¬è©¦å•†æ¥­é‚è¼¯

**ç†ç”±ï¼š**
- **æˆæœ¬æ§åˆ¶** - Gemini API ä»˜è²»ï¼ŒE2E æœƒæµªè²»é…é¡
- **é€Ÿåº¦** - å–®å…ƒæ¸¬è©¦æ¯«ç§’ç´šï¼ŒE2E ç§’ç´š
- **ç©©å®šæ€§** - ç„¡ç¶²è·¯ä¾è³´ï¼ŒCI/CD æ›´ç©©å®š
- **å•†æ¥­é‚è¼¯** - æ—¥æœŸè¨ˆç®—ã€ç‹€æ…‹åˆ¤æ–·ã€æ’åºé‚è¼¯æœ€é‡è¦

**æ¸¬è©¦æ¶æ§‹ï¼š**
```typescript
// Jest + fake-indexeddb + mocked Firebase
import { JSDOM } from 'jsdom'    // Browser API
import FakeIndexedDB from 'fake-indexeddb'  // IndexedDB mock
// Firebase å®Œå…¨ mockï¼Œä¸çœŸå¯¦èª¿ç”¨

// å–®å…ƒæ¸¬è©¦é‡é»ï¼š
- date.ts (è¨ˆç®—å™¨) - 230 è¡Œæ¸¬è©¦
- gemini.ts (è§£æå™¨) - JSON é©—è­‰ã€é‚Šç•Œæƒ…æ³
- storage.ts (IndexedDB) - CRUD é‚è¼¯
- firestore.ts (æ¥­å‹™é‚è¼¯) - æ¬„ä½é©—è­‰ã€æ’åº
```

**æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™ï¼š**
- Business Logic: >90% (date.ts, firestore.ts)
- API Integration: 50% (mock ä¸éœ€å…¨è¦†è“‹)
- Components: 20% (ç­‰å¾…å®Œå…¨å¯¦ç¾)

**E2E æ¸¬è©¦è¨ˆåŠƒï¼ˆPhase 2ï¼‰ï¼š**
```
Phase 2+: æ·»åŠ  Playwright/Cypress E2E æ¸¬è©¦
- å®Œæ•´ç”¨æˆ¶æµç¨‹ï¼šæ‹ç…§ â†’ è­˜åˆ¥ â†’ ä¿å­˜ â†’ æŸ¥çœ‹
- Staging ç’°å¢ƒ (å…è²» Gemini é…é¡)
- æ¯æ—¥å®šæ™‚åŸ·è¡Œ
```

---

## ğŸ“Š æ±ºç­–çŸ©é™£ï¼šå„ªå…ˆç´š vs å½±éŸ¿

```
           é«˜è¤‡é›œåº¦
                â”‚
   Firestore   â”‚  Context API
   Firebase    â”‚  (æœªå¯¦ç¾)
                â”‚
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é«˜é‡è¦åº¦
                â”‚
    IndexedDB   â”‚
   (è¤‡é›œåŒæ­¥)   â”‚
```

**ç´…è‰²ï¼ˆé–å®šï¼Œæ”¹å‹•å›°é›£ï¼‰ï¼š**
- âœ… Firestore + Storage ï¼ˆé·ç§»é›£ï¼‰
- âœ… Gemini Vision API ï¼ˆæˆæœ¬è€ƒæ…®ï¼‰
- âœ… åŒ¿å UUID ï¼ˆå¸³è™Ÿç³»çµ±ç„¡æ³•å…¼å®¹ï¼‰

**ç¶ è‰²ï¼ˆæ˜“æ–¼æ”¹å‹•ï¼‰ï¼š**
- âœ… Context API â†’ Zustand/Redux
- âœ… Tailwind â†’ CSS-in-JS
- âœ… Next.js 15 â†’ 16 ï¼ˆå·²æº–å‚™ï¼‰

---

## ğŸ”® æœªä¾†è€ƒæ…®

### å‡ç´šè·¯å¾‘ï¼ˆå·²è¦åŠƒï¼‰
1. **Phase 1ï¼ˆç•¶å‰ï¼‰** - åŒ¿å UUID + é›¢ç·šå„ªå…ˆ
2. **Phase 2** - å¯é¸å¸³è™Ÿï¼ˆFirebase Authï¼‰+ è·¨è¨­å‚™åŒæ­¥
3. **Phase 3** - ç¤¾äº¤åŠŸèƒ½ï¼ˆåˆ†äº«è³¼ç‰©æ¸…å–®ï¼‰
4. **Phase 4** - å¾Œå°é€šçŸ¥ï¼ˆéæœŸæé†’ï¼‰

### æ”¹é€²æ©Ÿæœƒ
- [ ] é·ç§» ESLint 8 â†’ 9ï¼ˆç•¶å‰ Next.js å»ºè­°ï¼‰
- [ ] æ·»åŠ  E2E æ¸¬è©¦ (Playwright)
- [ ] å¯¦ç¾ Context API å±¤
- [ ] å®Œå–„ PWA manifestï¼ˆapp iconsï¼‰
- [ ] å¤šèªè¨€æ”¯æ´ï¼ˆi18nï¼‰

---

## ğŸ“ å¯©æ ¸å’Œæ›´æ–°

**æœ€å¾Œå¯©æ ¸è€…ï¼š** Claude Code (æ¶æ§‹å¸«)
**æœ€å¾Œå¯©æ ¸æ—¥æœŸï¼š** 2025-12-17
**ä¸‹æ¬¡å¯©æ ¸æ—¥æœŸï¼š** 2026-Q1ï¼ˆå‡ç´šåˆ° Phase 2 æ™‚ï¼‰

---

**å¦‚æœ‰ç–‘å•æˆ–å»ºè­°ï¼Œè«‹é–‹ Issue æˆ–è¯çµ¡æ¶æ§‹åœ˜éšŠã€‚**
